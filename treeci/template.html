<!DOCTYPE html>
<head>
    <title>Reverse Inference</title>
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="js/stalactite.js"></script>
    <script src="//cdn.datatables.net/1.10.7/js/jquery.dataTables.min.js"></script>
    <script src="//cdn.datatables.net/plug-ins/1.10.7/integration/bootstrap/3/dataTables.bootstrap.js"></script>
    <link href='https://fonts.googleapis.com/css?family=Roboto:300' rel='stylesheet' type='text/css'>
    <link href='//cdn.datatables.net/plug-ins/1.10.7/integration/bootstrap/3/dataTables.bootstrap.css' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="css/style.css">

</head>

<meta charset="utf-8">
<body>
<div class="container">
    <div class="row">
         <h4 class="float-left">Cognitive Atlas Concept Tree with NeuroVault Images</h4>
    </div>
    <div class="row">
        <div class="col-md-8" id="tree"></div>
        <div class="col-md-4" id="info">
                <div class="row" id="info-box">
                       <a id="node_name_link"><h3 id="node_name">Mouse over the nodes.</h3></a>
                       <h3 id="node_contrast" class="hidden"></h3>
                       <h4 id="node_task" class="hidden"></h4>
                       <p id="node_description"></p> 
                </div>
                <div id="node_concepts" class="row hidden" style="margin-bottom:10px">

                </div>
                <!-- Buttons -->
                <div class="row well" id="button_controls">
                        <div style="margin-top:10px">

                            <!-- Download image or meta data -->                        
                            <a id="node_download" class="hidden" target="_blank">
                                <button class="btn btn-default btn-xs"><span class="glyphicon glyphicon-download-alt"></span>download</button>
                            </a>


                            <!-- About modal -->
                            <a>
                                <button type="button" data-toggle="modal" data-target="#about_modal" class="btn btn-default btn-xs"><span class="glyphicon glyphicon-question"></span>about</button>
                            </a>


                            <!-- Show associated images -->
                            <a id="node_images" class="hidden">
                                <button type="button" data-toggle="modal" data-target="#images_modal" class="btn btn-default btn-xs"><span class="glyphicon glyphicon-eye-open"></span>images</button>
                            </a>

                            <!-- Details page -->
                            <a id="node_details" class="hidden">
                                <button class="btn btn-default btn-xs"><span class="glyphicon glyphicon-info-sign"></span>details</button>
                            </a>
                    </div>
                </div>

                <!-- Image -->
                <div class="row">
                    <a href="#" id="node_image_holder" class="hidden" target="_blank">
                        <img id="node_image" width="250px" src=""/>
                    </a>
                </div>
        </div>
    </div>
<script src="https://d3js.org/d3.v3.min.js"></script>
<script src="js/reverseinference.js"></script>
</body>

<footer>
    <a class="footer" href="http://poldracklab.stanford.edu" target="_blank">Poldracklab</a>
</footer>

<!-- View Images Modal -->
<script>
$("#brain_maps").stalactite(); 
</script>

<div class="modal fade" id="images_modal">
  <div class="modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Images Tagged With Concept</h4>
        <div class="row">
            <div class="col-md-2">
                <p>collections </p>
            </div>
            <div class="col-md-10" id="collection_tags">
               <!-- Collection tags will be added here -->
            </div>
        </div>
      </div>
      <div class="modal-body" id="brain_maps" style="text-align: center;">
          <!-- Images get appended here -->
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!-- About modal-->
<div class="modal fade" id="about_modal">
  <div class="modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">About Cognitive Atlas Tagged NeuroVault Brain Maps</h4>
      </div>
      <div class="modal-body">
        <p><strong>What is this tree showing me?</strong> This is a tree of <a href="http://www.cognitiveatlas.org" target="_blank">Cognitive Atlas concepts</a> and brain map images from the <a href="http://www.neurovault.org">NeuroVault</a> database that have been asserted to measure them. Each blue dot (a "node") represents either a concept (in the case of a term like "risk") or an image (in the case of a number). When you click on the name of the concept or image in the panel on the right to explore further, you will see more details about the image or concept, and a list of associated images (in the case of a concept) or concepts (in the case of an image).</p><br>
        <p><strong>What is this?</strong> This is a continuous integration reproducible repo that will generate an updated tree of Cognitive Atlas concepts and associated NeuroVault images using APIs from both resources, which is updated whenever the branch is rebuild to reflect the current state of the Cognitive Atlas and NeuroVault.</p><br>
       <p><strong>How do I place my data in this space?</strong>We have implemented tagging of Cognitive Atlas task and contrasts in the <a href="http://www.neurovault.org">NeuroVault</a> database, and we invite you to upload your brain maps here and tag them to be added to this visualization (upon rebuilding on CircleCI to regenerate the artifact).</p><br>
       <p><strong>Who made this?</strong> This is a "continuous integration reproducible repo" that we have generated to go alone with work to assess the value of <a href="https://github.com/vsoch/semantic-image-comparison" target="_blank">semantic image comparison</a>. We have shown that there is value in annotating brain map images with cognitive concepts.</p>   
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->


</div><!-- close container-->

</html>
